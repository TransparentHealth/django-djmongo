{% extends "djmongo/console/base.html" %}


{% block extra_head %}

<script type="text/javascript">
$('.dropdown-toggle').dropdown();
</script>
{% endblock %}


{% block Content %}

{% load i18n %}

<div class="container">
      
      <br><br>
      <div class="row">
              <div class="col-lg-12">
			<ol class="breadcrumb">
			  <li><a href="{% url 'djmongo_show_dbs' %}">Home</a></li>
			</ol>
            </div>
      </div>   
      
   <div class="row">
      <div class="col-lg-12">
         <h2>MongoDB Management Console</h2>
      </div>
   </div>

   <div class="row">
      <div class="col-lg-12">

       <table class="table table-striped table-bordered">
      
       <thead>
       <tr>
         <th><h5>Databases</h5></th>
         <th><h5>Collections</h5></t3>
       </tr>
       </thead>
        
       <tbody>
       {% for d in dbs %}
       <tr>
       <td>
       <div class="btn-group">
           <a class="btn dropdown-toggle btn-default btn-large" data-toggle="dropdown" href="#">
          {{ d.name }}
           <span class="caret"></span>
           </a>
           <ul class="dropdown-menu">
              <li><a href="{% url 'djmongo_create_collection' d.name %}">
                   <i class="fa fa-database"></i> Create Collection</a> </li>
              <li role="presentation" class="divider"></li>   
              
			  
		      <li><a href="{% url 'djmongo_import_csv_w_db' d.name %}">
                    <i class="fa fa-arrow-right"></i> Import Data into a New Collection</a>
                </li>
			  
              <li><a href="{% url 'djmongo_drop_database' d.name %}">
                   <i class="fa fa-warning"></i> Drop Database</a>
              </li>
               
              </ul>
            </div>
       </td>
       <td>
           {% for c in d.collections %}
           <div class="btn-group">
           <div class="btn">
            <a class="btn dropdown-toggle btn-default btn-large" data-toggle="dropdown" href="#">
            {{c}}
            <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
     
	           <li> <a href="{% url 'djmongo_show_apis' d.name c %}">
                     <i class="fa fa-dashboard"></i> {% trans "API Dashboard" %}</a>
                   </li>
                  
	             <li role="presentation" class="divider"></li> 
                        <li><a  href="{% url 'djmongo_create_document_in_collection_w_params' d.name  c %}">
                   <i class="fa fa-plus-circle"></i> {% trans "Create a Document" %}</a></li>
						
				            <li><a  href="{% url 'djmongo_update_document_in_collection_w_params' d.name c %}">
                   <i class="fa fa-retweet"></i> {% trans "Update a Document" %}</a></li>
			            <li><a  href="{% url 'djmongo_ensure_index' d.name c %}">
                   <i class="fa fa-fighter-jet"></i> {% trans "Create an Index" %}</a></li>
			
			<li> <a  href="{% url 'djmongo_drop_collection' d.name c %}"">
                    <i class="fa fa-warning"></i> {% trans "Drop Collection" %} </a></li>

            
            <li role="presentation" class="divider"></li> 
                  
            
            <li> <a  target=_blank href="{% url 'djmongo_build_keys' d.name c %}">
                <i class="fa fa-key"></i> {% trans "Build Key Collection" %}</a></li>
 
 
              <li>
                  <a  href="{% url 'djmongo_import_csv_w_params' d.name c %}">
                  <i class="fa fa-arrow-right"></i> {% trans "Import a CSV" %}</a>
              </li>

               <li> <a  href="{% url 'djmongo_browse_saved_aggregations_w_params' d.name c %}">
                  <i class="fa fa-cogs"></i> {% trans "Schedule Aggregations" %}</a>
              </li>
                         
            </ul>
          </div>
          
          
           {% endfor %}
         </div> 
       {% endfor %}
       </table>
    </div>
    </div>

   <div class="row">
       <div class="col-lg-12">  
           <h2>API Management Console</h1>
       </div>
   </div>
   
   <div class="row">
          <div class="col-lg-12">    

               <table class="table table-striped table-bordered">
              
               <thead>
               <tr>
                 <th><h3>Endpoints</h3></th>
                 <th><h3>Details</h3></th>
                 <th><h3>Authentication</h3></th>
                 <th><h3>Actions</h3></th>
               </tr>
               </thead>
                
               <tbody>
                  {% for a in apis %}
                  <tr>
                  <td>JSON: {{ request.scheme }}://{{ request.META.HTTP_HOST }}{{ a.url }}<br>
                      NDJSON: {{ request.scheme }}://{{ request.META.HTTP_HOST }}{{ a.ndjson_url }}<br>
                      CSV: {{ request.scheme }}://{{ request.META.HTTP_HOST }}{{ a.csv_url }}<br>
                      Tab-Delimited: {{ request.scheme }}://{{ request.META.HTTP_HOST }}{{ a.td_url }}<br>
                      HTML: {{ request.scheme }}://{{ request.META.HTTP_HOST }}{{ a.html_url }}<br>
                  </td>
                  <td>Database/Collection/Slug: {{a.database_name}}/{{a.collection_name}}/{{a.slug}}<br>
                      Query Type: {{a.query_type}}<br>
                      HTTP Method: {{a.http_method}}<br>
                  
                  </td>
                  <td>{{a.auth_method}}</td>
                  <td></td>
                  <td> <a href=""> <button type="button" class="btn btn-default btn-xs"> <i class="fa fa-dashboard"></i> API Dashboard</button></a>
                  
                   <a href="{{ a.edit_url }}" >
									  <button type="button" class="btn btn-default btn-xs"> <i class="fa fa-edit"></i> Edit</button>
									  </a>

                  				<a href="{{ a.delete_url }}" >
									  <button type="button" class="btn btn-default btn-xs"> <i class="fa fa-pied-piper-alt"></i> Vanity URL</button>
									  </a>
                  			  
                             <a href="{{ a.delete_url }}" >
									  <button type="button" class="btn btn-default btn-xs"> <i class="fa fa-trash"></i> Delete</button>
									  </a>
         
                  </td>
                  </tr>
                  {% endfor %}
               </tbody>
               </table>
       </div>
   </div>
</div>
</div>

{% endblock %}
